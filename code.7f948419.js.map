{"version":3,"sources":["classes.js","inputs.js","physics.js","platforms.js","time.js","graph.js","canvasRenderer/sprite.js","levelEditor.js","canvasRenderer/canvasRenderer.js","code.js","../../.nvm/versions/node/v20.7.0/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["GameObj","_createClass","x","y","_classCallCheck","pos","Platform","exports","_GameObj","_inherits","_super","_createSuper","w","_this","call","R","L","IDLE","GO","JUMP","DEATH","HERO","ENEMY1","LAVAMAN","CACO","MECH","LiveObj","_GameObj2","_super2","type","_this2","state","arguments","length","undefined","speed","vel","dir","attack","State","lvl","hero","enemies","key","value","updateState","_ref","steering","mouse","mouseChanged","st","Input","_classes","require","keyboard","init","addEventListener","onKeyPress","onKeyUp","onMouseDown","onMouseUp","e","space","s","a","d","readInput","input","act","Number","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","i","F","n","done","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","applyEnemyPhysics","applyPhysics","_iterator","_step","enemy","Math","abs","forEach","_s$hero","p","createLvl","shift","drawAxes","ctx","beginPath","moveTo","lineTo","font","fillText","strokeStyle","closePath","stroke","drawSqrt","sqrt","_typeof","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","protoProps","staticProps","arg","_toPrimitive","String","hint","prim","toPrimitive","res","Sprite","img","anims","currentFrame","currentState","draw","animKey","_this$anims$get","get","x0","y0","h","spriteTime","allFrames","currN","floor","srcX","save","translate","scale","xx","yy","ww","hh","drawImage","strokeRect","drawOrigin","restore","lineWidth","Anim","drawPlatform","_graph","_ForestBoy","_interopRequireDefault","_enemies","_lavaman","_cacodaemonCombined","_mech","_sprite","obj","__esModule","default","sprites","Map","cam","initRender","canvas","document","getElementById","getContext","fillStyle","loadAssets","heroSprite","createHeroSprite","set","createEnemy1Sprite","createLavamanSprite","createCacoSprite","createMechSprite","heroImage","Image","src","forestboy","enemyImage","enemySheet","lavaImage","lavaSheet","cacoImage","cacoSheet","mechImage","mechSheet","coords","round","render","clearRect","width","height","fillRect","_state$hero","liveObject","sprite","_inputs","_physics","_platforms","_time","_canvasRenderer","initInput","window","initState","pxToKm","pow","garbageCollector","time","_state$enemies$i$pos","splice","loop","requestAnimationFrame","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"code.7f948419.js","sourceRoot":"..","sourcesContent":["class GameObj{\n\n\tconstructor(x,y){\n\t\tthis.pos = {x,y}\n\t}\n\n\n};\n\nexport class Platform extends GameObj{\n\tconstructor(x,y,w){\n\n\t\tsuper(x,y);\n\t\tthis.w = w;\n\t}\n}\n// --- consts ----\nexport const R = 1\nexport const L = -1\n\n//-- states -----\nexport const IDLE = 0\nexport const GO = 1\nexport const JUMP = 2\nexport const DEATH = 3\n\n\n//--- types ----\nexport const HERO = 0\nexport const ENEMY1 = 1\nexport const LAVAMAN = 2\nexport const CACO = 3\nexport const MECH = 4\n\nexport class LiveObj extends GameObj{\n\n\tconstructor(type,x,y, state = IDLE, speed = 0.65){\n\t\tsuper(x,y)\n\t\tthis.vel = {x:0,y:0}\n\t\tthis.speed = speed\n\t\tthis.state = state\n\t\tthis.type = type\n\t\tthis.dir = R \n\t\tthis.attack = -1\n\t}\n\n}\n\n\n\n\nexport class State{\n\tconstructor(lvl){\n\t\tthis.hero = new LiveObj(HERO, 10, 10, IDLE);\n\t\t//this.enemy = new LiveObj(ENEMY1, 490, 20, GO);\n\t\tthis.enemies = [new LiveObj(ENEMY1, 490, 20, GO),\n\t\t\t\t\t\tnew LiveObj(ENEMY1, 300, 100, GO),\n\t\t\t\t\t\tnew LiveObj(LAVAMAN, 250, 100, GO),\n\t\t\t\t\t\tnew LiveObj(CACO, 480, 235, GO),\n\t\t\t\t\t\tnew LiveObj(MECH, 550, 235, GO, 0.85),\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t]\n\t\tthis.lvl = lvl;\n\t\t//this.cam = {x:0,y:0}\n\n\t}\n\n\tupdateState({steering, mouse, mouseChanged}){\n\t \tif (mouseChanged){\n\t\t\tthis.hero.attack = 0\n\t\t}\n\t\telse if (this.hero.attack >= 20){\n\t\t\tthis.hero.attack = -1\n\t\t}\n\t\telse if (this.hero.attack >= 0){\n\t\t\tthis.hero.attack++\n\t\t}\n\t\t\n\n\t\tlet st = this.hero.state\n\t\tswitch (st){\n\t\t\tcase IDLE:\n\t\t\t\tif (steering.x != 0) {\n\t\t\t\t\tst = GO\n\t\t\t\t}else if(steering.y == 1){\n\t\t\t\t\tst=JUMP\n\t\t\t\t\tthis.hero.vel.y = -8\n\t\t\t\t}else {st=IDLE}\t\t\n\t\t\t\tbreak;\n\n\t\t\tcase GO :\n\t\t\t\tif (steering.x == 0) {\n\t\t\t\t\tst = IDLE\n\t\t\t\t}else if (steering.y == 1){\n\t\t\t\t\tst = JUMP\n\t\t\t\t\tthis.hero.vel.y = -8\n\t\t\t\t}else {st=GO}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (steering.x > 0){\n\t\t\tthis.hero.dir = R\n\t\t}else if (steering.x < 0){\n\t\t\tthis.hero.dir = L\n\t\t}\n\t\t\n\n\t\tthis.hero.state = st\n\n\t}\n\n};\n\nexport class Input{\n\tconstructor(){\n\t\tthis.steering = {x:0,y:0}\n\t\tthis.mouse = false\n\t\tthis.mouseChanged = false\n\n\t}\n\n\n}","import {HERO, ENEMY1, JUMP, GO,IDLE,Input} from './classes'\nvar keyboard = {\"w\":false,\n\t\t\t\t\"s\":false,\n\t\t\t\t\"a\":false,\n\t\t\t\t\"d\":false,\n\t\t\t\t\"space\":false};\n\nvar mouse = false\nvar mouseChanged = false\n\n\nexport function init(w){\n\n\tw.addEventListener('keydown', onKeyPress);\n\n\tw.addEventListener('keyup', onKeyUp);\n\n\tw.addEventListener('mousedown', onMouseDown);\n\n\tw.addEventListener('mouseup', onMouseUp);\n\n\n}\n\nfunction onMouseUp(e){\n\tmouse = false\n}\n\n\nfunction onMouseDown(e){\n\tmouse = true\n\tmouseChanged = true\n}\n\nfunction onKeyPress(e){\n\n\tswitch(e.key)\n\n\t{\n\t\tcase(\" \"):\n\t\t\tkeyboard.space = true;\n\t\t\tbreak;\n\n\t\tcase(\"w\"):\n\t\t\tkeyboard.w = true;\n\t\t\tbreak;\n\n\t\tcase(\"s\"):\n\t\t\tkeyboard.s = true;\n\t\t\tbreak;\n\n\t\tcase(\"a\"):\n\t\t\tkeyboard.a = true;\n\t\t\tbreak;\n\n\t\tcase(\"d\"):\n\t\t\tkeyboard.d = true;\n\t\t\tbreak;\n\n\t}\n\n\t\n}\n\nfunction onKeyUp(e){\n\n\tswitch(e.key)\n\n\t{\n\t\tcase(\" \"):\n\t\t\tkeyboard.space = false;\n\t\t\tbreak;\n\n\t\tcase(\"w\"):\n\t\t\tkeyboard.w = false;\n\t\t\tbreak;\n\n\t\tcase(\"s\"):\n\t\t\tkeyboard.s = false;\n\t\t\tbreak;\n\n\t\tcase(\"a\"):\n\t\t\tkeyboard.a = false;\n\t\t\tbreak;\n\n\t\tcase(\"d\"):\n\t\t\tkeyboard.d = false;\n\t\t\tbreak;\n\n\t}\n\n\t\n}\n\n\nexport function readInput(state){\n\n\tlet input = new Input()\n\n\tinput.act = keyboard.space\n\n\tinput.steering.y = Number(keyboard.w) - Number(keyboard.s)\n\tinput.steering.x = Number(keyboard.d) - Number(keyboard.a)\n\n\tinput.mouse = mouse\n\tinput.mouseChanged = mouseChanged\n\tmouseChanged = false // ЗЛО!\n\n\n\treturn input\n\n}","import {IDLE, GO, JUMP, L, R, DEATH} from './classes'\n\n\n\n//blabla\n\nfunction applyEnemyPhysics ({vel, pos, state, dir, speed} ) {\n\t\n\tif (state == GO) {\n\t\tvel.x = -speed\n\t\tvel.y += 0.25\n\t\tpos.x += vel.x\n\t\tpos.y += vel.y\n\n\t\tif (pos.y > 250){\n\t\t\tpos.y = 250;\n\t\t\tvel.y = 0\n\t\t}\n\t}\n\telse if (state == DEATH){\n\t\tvel.x = -0.65\n\t\tvel.y += 0.25\n\t\tpos.x += vel.x\n\t\tpos.y += vel.y\n\t}\t\n\n}\nexport function applyPhysics(s,input){\n\t\n\tfor (const enemy of s.enemies){\n\t\tif (enemy.state == DEATH) continue;\n\t\tif (Math.abs(enemy.pos.x - s.hero.pos.x) < 10 && \n\t\t\tMath.abs(enemy.pos.y - s.hero.pos.y) < 10 ){\n\t\t\t\tenemy.state = DEATH\n\t\t\t\tenemy.vel.y = -3\n\t\t\t}\n\n\t}\n\n\t// enemies physics\n\ts.enemies.forEach(applyEnemyPhysics);\n\n\t// hero physics\n\tconst {vel, pos, state, dir} = s.hero\n\n\n\tswitch (state) {\n\t\tcase IDLE:\n\t\t\tvel.x = 0\n\t\t\tbreak;\n\t\tcase GO:\n\t\t\tvel.x = input.steering.x \n\t\t\tbreak;\n\t\tcase JUMP:\t\t\t\n\t\t\tvel.x = input.steering.x \n\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\tvel.y += 0.25\n\tpos.x += vel.x * 2\n\tpos.y += vel.y\n\n\t// collistion with gnd\n\tif (pos.y > 250){\n\n\t\ts.hero.state = input.steering.x == 0 ? IDLE : GO\n\t\tpos.y = 250;\n\t\tvel.y = 0\n\t}\n  \n\n   for (var i = 0; i < s.lvl.length; i++) {\n   \t\tlet p = s.lvl[i]\n   \t\tif (pos.y > p.pos.y && \n   \t\t\tpos.x + 5 > p.pos.x && \n   \t\t\tpos.x - 5 < p.pos.x + p.w &&\n   \t\t\tpos.y < p.pos.y + 10){\n\t\t\t\tif (vel.y > 0 ){\n\t\t\t\t\ts.hero.state = input.steering.x == 0 ? IDLE : GO\n\t\t\t\t\tpos.y = p.pos.y;\n\t\t\t\t\tvel.y = 0\t\n\t\t\t\t}\n\t\t\t\t\n   \t\t\t\n\n   \t\t}\n   \t\n   }\n\n\n\n}","import {Platform} from './classes'\n\n\n\nexport function createLvl(){\n\n\tlet w = 50\n\n\treturn [\n\t\tnew Platform(200,200,w),\n\t\tnew Platform(250,150,w),\n\t\tnew Platform(300,100,w),\n\t\tnew Platform(350,50,w),\n\t\tnew Platform(400,0,w)\n\t]\n\t\n}\n\n","export default {n:0}; // количество дров прошедших со старта игры\n","\nconst shift = 250;\nconst step = 10;\n\nexport function drawAxes(ctx) {\n\n\tctx.beginPath();\n\tctx.moveTo(0, shift);\n\tctx.lineTo(500, shift);\n\tctx.moveTo(shift, 0);\n\tctx.lineTo(shift, 500);\n\n\tctx.font = '9px arial'\n\tfor (let x = 0; x <= 25; x++) {\n\n\t\tlet y = 260;\n\t\t//ctx.moveTo(x*step + shift, y);\n\t\tctx.fillText(x, x*step + shift, y);\n\n\t\t\n\t}\n\tctx.strokeStyle = 'rgb(0, 0, 0)';\n\n\tctx.closePath();\n\tctx.stroke();\n\n}\n\n\n\n\nexport function drawSqrt(ctx) {\n\n\t\n\t\n\n\tctx.beginPath();\n\tctx.moveTo(shift, shift);\n\n\tfor (let x = 0; x <= 25; x++) {\n\t\t\n\t\tlet y = Math.sqrt(x);\n\t\tctx.lineTo(x*step + shift, -y*step + shift)\n\n\n\n\t}\n \tctx.strokeStyle = 'rgb(255, 0, 0)';\n\t//ctx.closePath();\n\tctx.stroke();\n\n}","import {L} from './../classes'\nexport class Sprite {\n\tconstructor(img, anims){\n\t\tthis.img = img\n\t\tthis.anims = anims\n\t\tthis.currentFrame = 0\n\t\tthis.currentState\n\t\t//this.w = 16\n\t\t//this.h = 24\n\t}\n\n\tdraw(ctx, state, pos, dir, attack){\n\n\t\tif(this.currentState != state){\n\t\t\tthis.currentState = state\n\t\t\tthis.currentFrame = 0\n\n\t\t}\n\t\t//console.log(attack)\n\t\tlet animKey = attack >= 0 ? \"attack\" : state\n\t\tif (attack == 0) this.currentFrame = 0;\n\t\tconst {n, x0, y0, w, h, spriteTime, shift} = this.anims.get(animKey)\t\n\t\t//console.log(shift)\n\n\t\t\n\t\tconst allFrames = n * spriteTime\n\n\t\tlet currN = Math.floor(this.currentFrame/spriteTime)\n\t\t\n\t\tconst srcX = x0 + currN*w\n\n\t\t//console.log(vel)\n\t\t\n\t\tif (dir == L){ \n\n\t\t\tctx.save();\n\t\t\tctx.strokeStyle = 'red'\n\t\t\tctx.translate(pos.x, 0)\n\t\t\tctx.scale(-1, 1);\n\t\t\tlet xx = w - shift, yy = pos.y - h, ww = -w, hh = h\n\n\n\t\t\tctx.drawImage(this.img, srcX, y0, w, h, \n\t\t\t \txx, \n\t\t\t\tyy , ww, hh);\n\t\t\tctx.strokeRect(xx, yy , ww, hh);\n\t\t\tdrawOrigin(ctx, 0, pos.y)\n\t\t\tctx.restore();\n\t\t} else {\n\t\t\tctx.save()\n\t\t\tctx.translate(pos.x, 0)\n\t\t\tlet xx = -shift, yy = pos.y - h, ww = w, hh = h\n\t\t\tctx.drawImage(this.img, srcX, y0, w, h, \n\t\t\t \txx, //-shift,//pos.x - shift, \n\t\t\t\t yy , ww, hh);\n\n\t\t\tctx.strokeRect(xx, yy , ww, hh);\n\t\t\tdrawOrigin(ctx, 0, pos.y)\n\t\t\tctx.restore()\n\t\t}\n\n\n\t\tthis.currentFrame++;\n\t\tthis.currentFrame %= allFrames\n\t}\n}\n\nfunction drawOrigin(ctx, x, y){\n\tlet d = 20\n\tctx.save()\n\t\tctx.strokeStyle = 'green'\n\t\tctx.lineWidth = 1;\n\t\tctx.beginPath()\t\n\t\tctx.moveTo(x, y - d);\n\t\tctx.lineTo(x, y + d);\n\t\tctx.moveTo(x - d, y);\n\t\tctx.lineTo(x + d, y);\n\t\tctx.closePath()\n\t\tctx.stroke();\n\tctx.restore()\n}\n\nexport class Anim {\n\tconstructor(n, x0, y0, w, h,spriteTime, shift ){\n\t\tthis.n = n\n\t\tthis.x0 = x0\n\t\tthis.y0 = y0\n\t\tthis.w = w\n\t\tthis.shift = shift || w/2\n\t\tthis.h = h\n\t\tthis.spriteTime = spriteTime\n\t}\n}","export function drawPlatform() {\n\t\n}","import {drawAxes, drawSqrt} from './../graph'\nimport forestboy from './../ForestBoy.png'\nimport enemySheet from './../enemies.png'\nimport lavaSheet from './../assets/lavaman.png'\nimport cacoSheet from './../assets/cacodaemon-combined.png'\nimport mechSheet from './../assets/mech.png'\nimport {HERO, ENEMY1, JUMP, GO,IDLE, DEATH, LAVAMAN, CACO, MECH} from './../classes'\nimport {Sprite, Anim} from './sprite'\nimport {} from './../levelEditor'\n\n\n// 22:36 воры уехали...\n\nconst sprites = new Map()\nconst cam = {x:250,y:0}\n\nlet ctx;\n\nexport function initRender(){\n\n\tconst canvas = document.getElementById('tututu');\n\tctx = canvas.getContext('2d');\n\tctx.fillStyle = 'rgba(0, 0, 200, 0.5)'\n}\n\n\nexport function loadAssets(state){\n\n\t// HERO\n\tconst heroSprite = createHeroSprite();\n\tsprites.set(state.hero, heroSprite);\n\n\t// ENEMY1\n\t//const enemy = createEnemy1Sprite();\n\n\tfor(let i = 0;i < state.enemies.length; i++){\n\t\tlet enemy = state.enemies[i]\n\t\tswitch (enemy.type) {\n\t\t\tcase ENEMY1: sprites.set (enemy ,createEnemy1Sprite(enemy) )\n\t\t\t\tbreak;\n\t\t\tcase LAVAMAN: sprites.set (enemy ,createLavamanSprite(enemy) )\n\t\t\t\tbreak;\n\t\t\tcase CACO: sprites.set (enemy ,createCacoSprite(enemy) )\n\t\t\t\tbreak;\n\t\t\tcase MECH: sprites.set (enemy ,createMechSprite(enemy) )\n\t\t\t\tbreak;\t\n\t\t}\n\t\t\n\n\t}\n\t//sprites.set(ENEMY1, enemy);\n\n\n\n}\n\nfunction createHeroSprite (){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime , shift\n\tanims.set(GO,       new Anim(6, 11, 43, 16, 17, 5))\n\tanims.set(IDLE,     new Anim(3, 11, 12, 16, 18, 14))\n\tanims.set(JUMP,     new Anim(3, 59, 44, 16, 18, 10))\n\tanims.set(\"attack\", new Anim(4, 8, 122, 26, 18, 5, 6))\n\n\tconst heroImage = new Image();\n\theroImage.src = forestboy;\n\t//console.log (forestboy);\n\treturn new Sprite(heroImage, anims);\n}\n\nfunction createEnemy1Sprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(4, 0, 0, 30, 15, 8))\n\tanims.set(DEATH, new Anim(4, 0, 0, 30, 15, 8))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\n\tconst enemyImage = new Image();\n\tenemyImage.src = enemySheet;\n\treturn new Sprite(enemyImage, anims);\n\t\n}\n\nfunction createLavamanSprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(50, 0, 0, 64, 64, 1))\n\tanims.set(DEATH, new Anim(50, 0, 0, 64, 64, 1))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\nconst lavaImage = new Image();\n\tlavaImage.src = lavaSheet;\n\treturn new Sprite(lavaImage, anims);\n\n}\n\nfunction createCacoSprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(90, 0, 0, 64, 64, 1))\n\tanims.set(DEATH, new Anim(90, 0, 0, 64, 64, 1))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\n\tconst cacoImage = new Image();\n\tcacoImage.src = cacoSheet;\n\treturn new Sprite(cacoImage, anims);\n\n}\n\nfunction createMechSprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(54, 0, 0, 64, 64, 1))\n\tanims.set(DEATH, new Anim(54, 0, 0, 64, 64, 1))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\n\tconst mechImage = new Image();\n\tmechImage.src = mechSheet;\n\treturn new Sprite(mechImage, anims);\n\n}\n\nexport function coords (ctx, hero){\n\n\tctx.font = '15px arial'\n\tctx.fillText(Math.round(hero.pos.x)+':'+Math.round(hero.pos.y), 350 ,470 );\n\tctx.fillText(Math.round(hero.vel.x)+':'+Math.round(hero.vel.y), 350 ,485 );\n\n\n}\n\n\n\n\nexport function render(state) {\n//console.log(state.hero.x;\n//----- camera ---\n\tif (state.hero.pos.x > cam.x){\n\t\tcam.x = state.hero.pos.x \n\t\t\n\t}\n\n\tif (state.hero.pos.x < cam.x - 240){\n\t\tcam.x = state.hero.pos.x + 240\n\t\t\n\t}\n\n\n\t\n\tcam.y = state.hero.pos.y - 250\n\n\t\n\t\n\n\tctx.clearRect(0,0, ctx.canvas.width, ctx.canvas.height);\n\n\n\tctx.save();\n\tctx.translate(-(cam.x - 250), -cam.y)\n\n\tcoords(ctx, state.hero);\n\n  \tdrawAxes(ctx);\n\tdrawSqrt(ctx);\n\n\tfor (let i = 0; i < state.lvl.length; i++) {\n\n\t\tlet p = state.lvl[i]\n\t\t//ctx.fillStyle = 'rgb(200, 150, 150)'\n\t\tctx.fillStyle = 'lwn'\n\t\tctx.fillRect(p.pos.x, p.pos.y, p.w, 50);\n\n\t\t \n\t}\n\n\t//-- hero -------------\n\tconst {dir, pos, state: st, attack} = state.hero \n\tsprites.get(state.hero).draw(ctx, st, pos, dir, attack);\n\t//-- enemy ------------\n\n\tfor (let liveObject of state.enemies){\n\t\t//console.log(liveObject)\n\t\tlet sprite = sprites.get(liveObject)\n\t\tsprite.draw(ctx, liveObject.state, liveObject.pos, liveObject.dir);\n\t}\n\t//shadowPlarform();\n\n\tctx.restore();\n\n\t\n} \n\n","import {init as initInput, readInput} from './inputs'\nimport {applyPhysics} from './physics'\nimport {createLvl} from './platforms'\nimport {Platform, LiveObj, State} from './classes'\nimport  time from './time'\nimport {initRender, render, loadAssets} from './canvasRenderer/canvasRenderer'\n\nlet state;\n\n\n// --- init -----------------\nfunction init(){\n\n\tinitRender();\n\tinitInput(window);\n\tinitState();\n\tloadAssets(state);\n\n}\n\nfunction initState(){\t \n\tstate = new State(createLvl());\n};\n\n\n \n// ---  update ----\n\nfunction pxToKm (y){\n\treturn y*((198/108) * Math.pow(10, -5))\n}\n\nfunction garbageCollector(){\n\tif (time.n % 10 != 0) return;// hразряжаем\n\n\tfor (let i = 0; i < state.enemies.length; i++){\n\t\tconst {x,y} = state.enemies[i].pos;\n\t\tif (y > 300 || x < -10){\n\t\t\t//delete state.enemies[i];\n\t\t\tstate.enemies.splice(i, 1);\n\t\n\t\t}\n\t}\n}\n\n\n\nfunction loop(){\n\n\twindow.requestAnimationFrame(loop);\n\tconst input = readInput(state, input);\n\tstate.updateState(input);\n\tapplyPhysics(state, input);\n\t    \n\t//console.log(state.enemies[0].pos.y);\n\t// zzxsz\n\t\n\tgarbageCollector();\n\trender(state);\n\n\t\n\t// update time\n\ttime.n++\n\t\n}\n\n\n\n//--- start -----------\ninit();\n\nloop();\n/*\nvar audioCtx = new AudioContext();\n\nvar oscillator = audioCtx.createOscillator();\nvar gainNode = audioCtx.createGain();\n\noscillator.connect(gainNode);\ngainNode.connect(audioCtx.destination);\n\noscillator.detune.value = 0; // value in cents\n oscillator.start(0);\n\nsetInterval(()=>{\n\toscillator.detune.value = 1200; // value in cents\n\t// oscillator.start(0);\n\t\n\tsetInterval(()=>{\n\t\toscillator.detune.value = 700; // value in cents\n\t\t\n\t\t\tsetInterval(()=>{\n\t\t\toscillator.detune.value = 00; // value in cents\n\t\t\t\toscillator.stop(3);\n\t\t\t\n\t\t\n\t\t}, 1000)\n\t}, 1000)\n}, 1000)\n\n*/\n\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}