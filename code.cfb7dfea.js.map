{"version":3,"sources":["classes.js","inputs.js","physics.js","platforms.js","time.js","graph.js","canvasRenderer/sprite.js","levelEditor.js","canvasRenderer/canvasRenderer.js","code.js"],"names":["GameObj","_createClass","x","y","_classCallCheck","pos","Platform","exports","_GameObj","_inherits","_super","_createSuper","w","_this","call","R","L","IDLE","GO","JUMP","DEATH","HERO","ENEMY1","LAVAMAN","CACO","MECH","LiveObj","_GameObj2","_super2","type","_this2","state","arguments","length","undefined","speed","vel","dir","attack","State","lvl","hero","enemies","key","value","_ref","steering","mouse","mouseChanged","st","Input","_classes","require","keyboard","init","addEventListener","onKeyPress","onKeyUp","onMouseDown","onMouseUp","e","space","s","a","d","readInput","input","act","Number","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","i","F","n","done","_e","f","TypeError","normalCompletion","err","didErr","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","applyEnemyPhysics","applyPhysics","_step","_iterator","enemy","Math","abs","forEach","_s$hero","p","createLvl","shift","drawAxes","ctx","beginPath","moveTo","lineTo","font","fillText","strokeStyle","closePath","stroke","drawSqrt","sqrt","_typeof","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","protoProps","staticProps","arg","_toPrimitive","String","hint","prim","toPrimitive","res","Sprite","img","anims","currentFrame","currentState","animKey","_this$anims$get","get","x0","y0","h","spriteTime","allFrames","srcX","floor","save","translate","scale","xx","yy","ww","hh","drawImage","strokeRect","drawOrigin","restore","lineWidth","Anim","drawPlatform","_graph","_ForestBoy","_interopRequireDefault","_enemies","_lavaman","_cacodaemonCombined","_mech","_sprite","obj","__esModule","default","sprites","Map","cam","initRender","canvas","document","getElementById","getContext","fillStyle","loadAssets","heroSprite","createHeroSprite","set","createEnemy1Sprite","createLavamanSprite","createCacoSprite","createMechSprite","heroImage","Image","src","forestboy","enemyImage","enemySheet","lavaImage","lavaSheet","cacoImage","cacoSheet","mechImage","mechSheet","coords","round","render","clearRect","width","height","fillRect","_state$hero","draw","liveObject","_inputs","_physics","_platforms","_time","_canvasRenderer","initInput","window","initState","pxToKm","pow","garbageCollector","time","_state$enemies$i$pos","splice","loop","requestAnimationFrame","updateState"],"mappings":"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","file":"code.cfb7dfea.js","sourceRoot":"..","sourcesContent":["class GameObj{\n\n\tconstructor(x,y){\n\t\tthis.pos = {x,y}\n\t}\n\n\n};\n\nexport class Platform extends GameObj{\n\tconstructor(x,y,w){\n\n\t\tsuper(x,y);\n\t\tthis.w = w;\n\t}\n}\n// --- consts ----\nexport const R = 1\nexport const L = -1\n\n//-- states -----\nexport const IDLE = 0\nexport const GO = 1\nexport const JUMP = 2\nexport const DEATH = 3\n\n\n//--- types ----\nexport const HERO = 0\nexport const ENEMY1 = 1\nexport const LAVAMAN = 2\nexport const CACO = 3\nexport const MECH = 4\n\nexport class LiveObj extends GameObj{\n\n\tconstructor(type,x,y, state = IDLE, speed = 0.65){\n\t\tsuper(x,y)\n\t\tthis.vel = {x:0,y:0}\n\t\tthis.speed = speed\n\t\tthis.state = state\n\t\tthis.type = type\n\t\tthis.dir = R \n\t\tthis.attack = -1\n\t}\n\n}\n\n\n\n\nexport class State{\n\tconstructor(lvl){\n\t\tthis.hero = new LiveObj(HERO, 10, 10, IDLE);\n\t\t//this.enemy = new LiveObj(ENEMY1, 490, 20, GO);\n\t\tthis.enemies = [new LiveObj(ENEMY1, 490, 20, GO),\n\t\t\t\t\t\tnew LiveObj(ENEMY1, 300, 100, GO),\n\t\t\t\t\t\tnew LiveObj(LAVAMAN, 250, 100, GO),\n\t\t\t\t\t\tnew LiveObj(CACO, 480, 235, GO),\n\t\t\t\t\t\tnew LiveObj(MECH, 550, 235, GO, 0.85),\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t]\n\t\tthis.lvl = lvl;\n\t\t//this.cam = {x:0,y:0}\n\n\t}\n\n\tupdateState({steering, mouse, mouseChanged}){\n\t \tif (mouseChanged){\n\t\t\tthis.hero.attack = 0\n\t\t}\n\t\telse if (this.hero.attack >= 20){\n\t\t\tthis.hero.attack = -1\n\t\t}\n\t\telse if (this.hero.attack >= 0){\n\t\t\tthis.hero.attack++\n\t\t}\n\t\t\n\n\t\tlet st = this.hero.state\n\t\tswitch (st){\n\t\t\tcase IDLE:\n\t\t\t\tif (steering.x != 0) {\n\t\t\t\t\tst = GO\n\t\t\t\t}else if(steering.y == 1){\n\t\t\t\t\tst=JUMP\n\t\t\t\t\tthis.hero.vel.y = -8\n\t\t\t\t}else {st=IDLE}\t\t\n\t\t\t\tbreak;\n\n\t\t\tcase GO :\n\t\t\t\tif (steering.x == 0) {\n\t\t\t\t\tst = IDLE\n\t\t\t\t}else if (steering.y == 1){\n\t\t\t\t\tst = JUMP\n\t\t\t\t\tthis.hero.vel.y = -8\n\t\t\t\t}else {st=GO}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (steering.x > 0){\n\t\t\tthis.hero.dir = R\n\t\t}else if (steering.x < 0){\n\t\t\tthis.hero.dir = L\n\t\t}\n\t\t\n\n\t\tthis.hero.state = st\n\n\t}\n\n};\n\nexport class Input{\n\tconstructor(){\n\t\tthis.steering = {x:0,y:0}\n\t\tthis.mouse = false\n\t\tthis.mouseChanged = false\n\n\t}\n\n\n}","import {HERO, ENEMY1, JUMP, GO,IDLE,Input} from './classes'\nvar keyboard = {\"w\":false,\n\t\t\t\t\"s\":false,\n\t\t\t\t\"a\":false,\n\t\t\t\t\"d\":false,\n\t\t\t\t\"space\":false};\n\nvar mouse = false\nvar mouseChanged = false\n\n\nexport function init(w){\n\n\tw.addEventListener('keydown', onKeyPress);\n\n\tw.addEventListener('keyup', onKeyUp);\n\n\tw.addEventListener('mousedown', onMouseDown);\n\n\tw.addEventListener('mouseup', onMouseUp);\n\n\n}\n\nfunction onMouseUp(e){\n\tmouse = false\n}\n\n\nfunction onMouseDown(e){\n\tmouse = true\n\tmouseChanged = true\n}\n\nfunction onKeyPress(e){\n\n\tswitch(e.key)\n\n\t{\n\t\tcase(\" \"):\n\t\t\tkeyboard.space = true;\n\t\t\tbreak;\n\n\t\tcase(\"w\"):\n\t\t\tkeyboard.w = true;\n\t\t\tbreak;\n\n\t\tcase(\"s\"):\n\t\t\tkeyboard.s = true;\n\t\t\tbreak;\n\n\t\tcase(\"a\"):\n\t\t\tkeyboard.a = true;\n\t\t\tbreak;\n\n\t\tcase(\"d\"):\n\t\t\tkeyboard.d = true;\n\t\t\tbreak;\n\n\t}\n\n\t\n}\n\nfunction onKeyUp(e){\n\n\tswitch(e.key)\n\n\t{\n\t\tcase(\" \"):\n\t\t\tkeyboard.space = false;\n\t\t\tbreak;\n\n\t\tcase(\"w\"):\n\t\t\tkeyboard.w = false;\n\t\t\tbreak;\n\n\t\tcase(\"s\"):\n\t\t\tkeyboard.s = false;\n\t\t\tbreak;\n\n\t\tcase(\"a\"):\n\t\t\tkeyboard.a = false;\n\t\t\tbreak;\n\n\t\tcase(\"d\"):\n\t\t\tkeyboard.d = false;\n\t\t\tbreak;\n\n\t}\n\n\t\n}\n\n\nexport function readInput(state){\n\n\tlet input = new Input()\n\n\tinput.act = keyboard.space\n\n\tinput.steering.y = Number(keyboard.w) - Number(keyboard.s)\n\tinput.steering.x = Number(keyboard.d) - Number(keyboard.a)\n\n\tinput.mouse = mouse\n\tinput.mouseChanged = mouseChanged\n\tmouseChanged = false // ЗЛО!\n\n\n\treturn input\n\n}","import {IDLE, GO, JUMP, L, R, DEATH} from './classes'\n\n\n\n//blabla\n\nfunction applyEnemyPhysics ({vel, pos, state, dir, speed} ) {\n\t\n\tif (state == GO) {\n\t\tvel.x = -speed\n\t\tvel.y += 0.25\n\t\tpos.x += vel.x\n\t\tpos.y += vel.y\n\n\t\tif (pos.y > 250){\n\t\t\tpos.y = 250;\n\t\t\tvel.y = 0\n\t\t}\n\t}\n\telse if (state == DEATH){\n\t\tvel.x = -0.65\n\t\tvel.y += 0.25\n\t\tpos.x += vel.x\n\t\tpos.y += vel.y\n\t}\t\n\n}\nexport function applyPhysics(s,input){\n\t\n\tfor (const enemy of s.enemies){\n\t\tif (enemy.state == DEATH) continue;\n\t\tif (Math.abs(enemy.pos.x - s.hero.pos.x) < 10 && \n\t\t\tMath.abs(enemy.pos.y - s.hero.pos.y) < 10 ){\n\t\t\t\tenemy.state = DEATH\n\t\t\t\tenemy.vel.y = -3\n\t\t\t}\n\n\t}\n\n\t// enemies physics\n\ts.enemies.forEach(applyEnemyPhysics);\n\n\t// hero physics\n\tconst {vel, pos, state, dir} = s.hero\n\n\n\tswitch (state) {\n\t\tcase IDLE:\n\t\t\tvel.x = 0\n\t\t\tbreak;\n\t\tcase GO:\n\t\t\tvel.x = input.steering.x \n\t\t\tbreak;\n\t\tcase JUMP:\t\t\t\n\t\t\tvel.x = input.steering.x \n\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\tvel.y += 0.25\n\tpos.x += vel.x * 2\n\tpos.y += vel.y\n\n\t// collistion with gnd\n\tif (pos.y > 250){\n\n\t\ts.hero.state = input.steering.x == 0 ? IDLE : GO\n\t\tpos.y = 250;\n\t\tvel.y = 0\n\t}\n  \n\n   for (var i = 0; i < s.lvl.length; i++) {\n   \t\tlet p = s.lvl[i]\n   \t\tif (pos.y > p.pos.y && \n   \t\t\tpos.x + 5 > p.pos.x && \n   \t\t\tpos.x - 5 < p.pos.x + p.w &&\n   \t\t\tpos.y < p.pos.y + 10){\n\t\t\t\tif (vel.y > 0 ){\n\t\t\t\t\ts.hero.state = input.steering.x == 0 ? IDLE : GO\n\t\t\t\t\tpos.y = p.pos.y;\n\t\t\t\t\tvel.y = 0\t\n\t\t\t\t}\n\t\t\t\t\n   \t\t\t\n\n   \t\t}\n   \t\n   }\n\n\n\n}","import {Platform} from './classes'\n\n\n\nexport function createLvl(){\n\n\tlet w = 50\n\n\treturn [\n\t\tnew Platform(200,200,w),\n\t\tnew Platform(250,150,w),\n\t\tnew Platform(300,100,w),\n\t\tnew Platform(350,50,w),\n\t\tnew Platform(400,0,w)\n\t]\n\t\n}\n\n","export default {n:0}; // количество дров прошедших со старта игры\n","\nconst shift = 250;\nconst step = 10;\n\nexport function drawAxes(ctx) {\n\n\tctx.beginPath();\n\tctx.moveTo(0, shift);\n\tctx.lineTo(500, shift);\n\tctx.moveTo(shift, 0);\n\tctx.lineTo(shift, 500);\n\n\tctx.font = '9px arial'\n\tfor (let x = 0; x <= 25; x++) {\n\n\t\tlet y = 260;\n\t\t//ctx.moveTo(x*step + shift, y);\n\t\tctx.fillText(x, x*step + shift, y);\n\n\t\t\n\t}\n\tctx.strokeStyle = 'rgb(0, 0, 0)';\n\n\tctx.closePath();\n\tctx.stroke();\n\n}\n\n\n\n\nexport function drawSqrt(ctx) {\n\n\t\n\t\n\n\tctx.beginPath();\n\tctx.moveTo(shift, shift);\n\n\tfor (let x = 0; x <= 25; x++) {\n\t\t\n\t\tlet y = Math.sqrt(x);\n\t\tctx.lineTo(x*step + shift, -y*step + shift)\n\n\n\n\t}\n \tctx.strokeStyle = 'rgb(255, 0, 0)';\n\t//ctx.closePath();\n\tctx.stroke();\n\n}","import {L} from './../classes'\nexport class Sprite {\n\tconstructor(img, anims){\n\t\tthis.img = img\n\t\tthis.anims = anims\n\t\tthis.currentFrame = 0\n\t\tthis.currentState\n\t\t//this.w = 16\n\t\t//this.h = 24\n\t}\n\n\tdraw(ctx, state, pos, dir, attack){\n\n\t\tif(this.currentState != state){\n\t\t\tthis.currentState = state\n\t\t\tthis.currentFrame = 0\n\n\t\t}\n\t\t//console.log(attack)\n\t\tlet animKey = attack >= 0 ? \"attack\" : state\n\t\tif (attack == 0) this.currentFrame = 0;\n\t\tconst {n, x0, y0, w, h, spriteTime, shift} = this.anims.get(animKey)\t\n\t\t//console.log(shift)\n\n\t\t\n\t\tconst allFrames = n * spriteTime\n\n\t\tlet currN = Math.floor(this.currentFrame/spriteTime)\n\t\t\n\t\tconst srcX = x0 + currN*w\n\n\t\t//console.log(vel)\n\t\t\n\t\tif (dir == L){ \n\n\t\t\tctx.save();\n\t\t\tctx.strokeStyle = 'red'\n\t\t\tctx.translate(pos.x, 0)\n\t\t\tctx.scale(-1, 1);\n\t\t\tlet xx = w - shift, yy = pos.y - h, ww = -w, hh = h\n\n\n\t\t\tctx.drawImage(this.img, srcX, y0, w, h, \n\t\t\t \txx, \n\t\t\t\tyy , ww, hh);\n\t\t\tctx.strokeRect(xx, yy , ww, hh);\n\t\t\tdrawOrigin(ctx, 0, pos.y)\n\t\t\tctx.restore();\n\t\t} else {\n\t\t\tctx.save()\n\t\t\tctx.translate(pos.x, 0)\n\t\t\tlet xx = -shift, yy = pos.y - h, ww = w, hh = h\n\t\t\tctx.drawImage(this.img, srcX, y0, w, h, \n\t\t\t \txx, //-shift,//pos.x - shift, \n\t\t\t\t yy , ww, hh);\n\n\t\t\tctx.strokeRect(xx, yy , ww, hh);\n\t\t\tdrawOrigin(ctx, 0, pos.y)\n\t\t\tctx.restore()\n\t\t}\n\n\n\t\tthis.currentFrame++;\n\t\tthis.currentFrame %= allFrames\n\t}\n}\n\nfunction drawOrigin(ctx, x, y){\n\tlet d = 20\n\tctx.save()\n\t\tctx.strokeStyle = 'green'\n\t\tctx.lineWidth = 1;\n\t\tctx.beginPath()\t\n\t\tctx.moveTo(x, y - d);\n\t\tctx.lineTo(x, y + d);\n\t\tctx.moveTo(x - d, y);\n\t\tctx.lineTo(x + d, y);\n\t\tctx.closePath()\n\t\tctx.stroke();\n\tctx.restore()\n}\n\nexport class Anim {\n\tconstructor(n, x0, y0, w, h,spriteTime, shift ){\n\t\tthis.n = n\n\t\tthis.x0 = x0\n\t\tthis.y0 = y0\n\t\tthis.w = w\n\t\tthis.shift = shift || w/2\n\t\tthis.h = h\n\t\tthis.spriteTime = spriteTime\n\t}\n}","export function drawPlatform() {\n\t\n}","import {drawAxes, drawSqrt} from './../graph'\nimport forestboy from './../ForestBoy.png'\nimport enemySheet from './../enemies.png'\nimport lavaSheet from './../assets/lavaman.png'\nimport cacoSheet from './../assets/cacodaemon-combined.png'\nimport mechSheet from './../assets/mech.png'\nimport {HERO, ENEMY1, JUMP, GO,IDLE, DEATH, LAVAMAN, CACO, MECH} from './../classes'\nimport {Sprite, Anim} from './sprite'\nimport {} from './../levelEditor'\n\n\n// 22:36 воры уехали...\n\nconst sprites = new Map()\nconst cam = {x:250,y:0}\n\nlet ctx;\n\nexport function initRender(){\n\n\tconst canvas = document.getElementById('tututu');\n\tctx = canvas.getContext('2d');\n\tctx.fillStyle = 'rgba(0, 0, 200, 0.5)'\n}\n\n\nexport function loadAssets(state){\n\n\t// HERO\n\tconst heroSprite = createHeroSprite();\n\tsprites.set(state.hero, heroSprite);\n\n\t// ENEMY1\n\t//const enemy = createEnemy1Sprite();\n\n\tfor(let i = 0;i < state.enemies.length; i++){\n\t\tlet enemy = state.enemies[i]\n\t\tswitch (enemy.type) {\n\t\t\tcase ENEMY1: sprites.set (enemy ,createEnemy1Sprite(enemy) )\n\t\t\t\tbreak;\n\t\t\tcase LAVAMAN: sprites.set (enemy ,createLavamanSprite(enemy) )\n\t\t\t\tbreak;\n\t\t\tcase CACO: sprites.set (enemy ,createCacoSprite(enemy) )\n\t\t\t\tbreak;\n\t\t\tcase MECH: sprites.set (enemy ,createMechSprite(enemy) )\n\t\t\t\tbreak;\t\n\t\t}\n\t\t\n\n\t}\n\t//sprites.set(ENEMY1, enemy);\n\n\n\n}\n\nfunction createHeroSprite (){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime , shift\n\tanims.set(GO,       new Anim(6, 11, 43, 16, 17, 5))\n\tanims.set(IDLE,     new Anim(3, 11, 12, 16, 18, 14))\n\tanims.set(JUMP,     new Anim(3, 59, 44, 16, 18, 10))\n\tanims.set(\"attack\", new Anim(4, 8, 122, 26, 18, 5, 6))\n\n\tconst heroImage = new Image();\n\theroImage.src = forestboy;\n\t//console.log (forestboy);\n\treturn new Sprite(heroImage, anims);\n}\n\nfunction createEnemy1Sprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(4, 0, 0, 30, 15, 8))\n\tanims.set(DEATH, new Anim(4, 0, 0, 30, 15, 8))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\n\tconst enemyImage = new Image();\n\tenemyImage.src = enemySheet;\n\treturn new Sprite(enemyImage, anims);\n\t\n}\n\nfunction createLavamanSprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(50, 0, 0, 64, 64, 1))\n\tanims.set(DEATH, new Anim(50, 0, 0, 64, 64, 1))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\nconst lavaImage = new Image();\n\tlavaImage.src = lavaSheet;\n\treturn new Sprite(lavaImage, anims);\n\n}\n\nfunction createCacoSprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(90, 0, 0, 64, 64, 1))\n\tanims.set(DEATH, new Anim(90, 0, 0, 64, 64, 1))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\n\tconst cacoImage = new Image();\n\tcacoImage.src = cacoSheet;\n\treturn new Sprite(cacoImage, anims);\n\n}\n\nfunction createMechSprite (enemy){\n\tconst anims  = new Map()\n\t//n, x0, y0, w, h,spriteTime \n\tanims.set(GO, new Anim(54, 0, 0, 64, 64, 1))\n\tanims.set(DEATH, new Anim(54, 0, 0, 64, 64, 1))\n//\tanims.set(IDLE, new Anim(3, 11, 12, 16, 18, 14))\n//\tanims.set(JUMP, new Anim(3, 59, 44, 16, 18, 10))\n\n\tconst mechImage = new Image();\n\tmechImage.src = mechSheet;\n\treturn new Sprite(mechImage, anims);\n\n}\n\nexport function coords (ctx, hero){\n\n\tctx.font = '15px arial'\n\tctx.fillText(Math.round(hero.pos.x)+':'+Math.round(hero.pos.y), 350 ,470 );\n\tctx.fillText(Math.round(hero.vel.x)+':'+Math.round(hero.vel.y), 350 ,485 );\n\n\n}\n\n\n\n\nexport function render(state) {\n//console.log(state.hero.x;\n//----- camera ---\n\tif (state.hero.pos.x > cam.x){\n\t\tcam.x = state.hero.pos.x \n\t\t\n\t}\n\n\tif (state.hero.pos.x < cam.x - 240){\n\t\tcam.x = state.hero.pos.x + 240\n\t\t\n\t}\n\n\n\t\n\tcam.y = state.hero.pos.y - 250\n\n\t\n\t\n\n\tctx.clearRect(0,0, ctx.canvas.width, ctx.canvas.height);\n\n\n\tctx.save();\n\tctx.translate(-(cam.x - 250), -cam.y)\n\n\tcoords(ctx, state.hero);\n\n  \tdrawAxes(ctx);\n\tdrawSqrt(ctx);\n\n\tfor (let i = 0; i < state.lvl.length; i++) {\n\n\t\tlet p = state.lvl[i]\n\t\t//ctx.fillStyle = 'rgb(200, 150, 150)'\n\t\tctx.fillStyle = 'lwn'\n\t\tctx.fillRect(p.pos.x, p.pos.y, p.w, 50);\n\n\t\t \n\t}\n\n\t//-- hero -------------\n\tconst {dir, pos, state: st, attack} = state.hero \n\tsprites.get(state.hero).draw(ctx, st, pos, dir, attack);\n\t//-- enemy ------------\n\n\tfor (let liveObject of state.enemies){\n\t\t//console.log(liveObject)\n\t\tlet sprite = sprites.get(liveObject)\n\t\tsprite.draw(ctx, liveObject.state, liveObject.pos, liveObject.dir);\n\t}\n\t//shadowPlarform();\n\n\tctx.restore();\n\n\t\n} \n\n","import {init as initInput, readInput} from './inputs'\nimport {applyPhysics} from './physics'\nimport {createLvl} from './platforms'\nimport {Platform, LiveObj, State} from './classes'\nimport  time from './time'\nimport {initRender, render, loadAssets} from './canvasRenderer/canvasRenderer'\n\nlet state;\n\n\n// --- init -----------------\nfunction init(){\n\n\tinitRender();\n\tinitInput(window);\n\tinitState();\n\tloadAssets(state);\n\n}\n\nfunction initState(){\t \n\tstate = new State(createLvl());\n};\n\n\n \n// ---  update ----\n\nfunction pxToKm (y){\n\treturn y*((198/108) * Math.pow(10, -5))\n}\n\nfunction garbageCollector(){\n\tif (time.n % 10 != 0) return;// hразряжаем\n\n\tfor (let i = 0; i < state.enemies.length; i++){\n\t\tconst {x,y} = state.enemies[i].pos;\n\t\tif (y > 300 || x < -10){\n\t\t\t//delete state.enemies[i];\n\t\t\tstate.enemies.splice(i, 1);\n\t\n\t\t}\n\t}\n}\n\n\n\nfunction loop(){\n\n\twindow.requestAnimationFrame(loop);\n\tconst input = readInput(state, input);\n\tstate.updateState(input);\n\tapplyPhysics(state, input);\n\t    \n\t//console.log(state.enemies[0].pos.y);\n\t// zzxsz\n\t\n\tgarbageCollector();\n\trender(state);\n\n\t\n\t// update time\n\ttime.n++\n\t\n}\n\n\n\n//--- start -----------\ninit();\n\nloop();\n/*\nvar audioCtx = new AudioContext();\n\nvar oscillator = audioCtx.createOscillator();\nvar gainNode = audioCtx.createGain();\n\noscillator.connect(gainNode);\ngainNode.connect(audioCtx.destination);\n\noscillator.detune.value = 0; // value in cents\n oscillator.start(0);\n\nsetInterval(()=>{\n\toscillator.detune.value = 1200; // value in cents\n\t// oscillator.start(0);\n\t\n\tsetInterval(()=>{\n\t\toscillator.detune.value = 700; // value in cents\n\t\t\n\t\t\tsetInterval(()=>{\n\t\t\toscillator.detune.value = 00; // value in cents\n\t\t\t\toscillator.stop(3);\n\t\t\t\n\t\t\n\t\t}, 1000)\n\t}, 1000)\n}, 1000)\n\n*/\n\n"]}